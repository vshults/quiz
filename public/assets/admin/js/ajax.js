function editHost(t){$('.js-edit-host input[type="text"], .js-edit-host input[type="tel"], .js-edit-host select, .js-edit-host input[type="email"], .js-edit-host input[type="password"], .js-edit-host textarea').on("change",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-name");$.ajax({url:t,type:"post",data:{id:e,name:a,value:$(this).val()},success(){}}).then((()=>{$(this).addClass("is-valid"),setTimeout((()=>{$(this).removeClass("is-valid")}),500)}))}))}function deleteHost(t){$(document).on("click",".delete_host",(function(){let e=$(this).attr("data-id"),a=$(this).closest(".foo");$.ajax({url:t,type:"post",data:{id:e},success(){a.remove()}}).then((()=>{}))}))}function addHost(t){$(document).on("click","#hostAdd",(function(e){e.preventDefault();var a=$("#addForm")[0],s=new FormData(a);$.ajax({url:t,type:"POST",data:s,processData:!1,contentType:!1,success:function(t){$(".error_emails_host").css("display","none"),$(".error_domen_host").css("display","none"),$(".alert-success").css("display","block")},error:function(t,e,a){let s=t.responseText,n=JSON.parse(s).errors.domen;n&&$(".error_domen_host").css("display","block").text(n)}})}))}function editSetting(t){$('.js-edit-setting input[type="text"], .js-edit-setting input[type="tel"], .js-edit-setting input[type="email"], .js-edit-setting input[type="password"], .js-edit-setting textarea').on("change",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-name");$.ajax({url:t,type:"post",data:{id:e,name:a,value:$(this).val()},success(){}}).then((()=>{function t(){try{return JSON.parse($("#json-input").val())}catch(t){alert("Неверный формат json")}}$(this).addClass("is-valid"),new JsonEditor("#json-display",t()).load(t()),setTimeout((()=>{$(this).removeClass("is-valid")}),500)}))}))}function getJson(){return JSON.parse($("#json-input").val())}var editor=new JsonEditor("#json-display",getJson());function questionTitle(t){$('.js-edit-question_title input[type="text"], .js-edit-question_title textarea').on("change",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-name");$(this).attr("data-answer");$.ajax({url:t,type:"post",data:{id:e,name:a,value:$(this).val()},success(){}}).then((()=>{$(this).addClass("is-valid"),setTimeout((()=>{$(this).removeClass("is-valid")}),500)}))}))}function editAnswer(t){$('.js-edit-answer input[type="text"], .js-edit-answer textarea').on("change",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-name"),s=$(this).attr("data-answer");$.ajax({url:t,type:"post",data:{id:e,name:a,answer:s,value:$(this).val()},success(){}}).then((()=>{$(this).addClass("is-valid"),setTimeout((()=>{$(this).removeClass("is-valid")}),500)}))}))}function editQuestionsSetting(t){$('.js-edit-questions-setting input[type="text"], .js-edit-questions-setting select, .js-edit-questions-setting input[type="checkbox"], .js-edit-questions-setting textarea').on("change",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-name");$.ajax({url:t,type:"post",data:{id:e,name:a,value:$(this).val()},success(){}}).then((()=>{$(this).addClass("is-valid"),setTimeout((()=>{$(this).removeClass("is-valid")}),500)}))}))}function addBranch(t){$(document).on("click",".add_branch",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-hostID"),s=$(this).attr("data-selection-id");$.ajax({url:t,type:"post",data:{id:e,hostID:a,selectionID:s},success(){}}).then((()=>{location.reload()}))}))}function addBranchQuestion(t){$(document).on("click",".add_branch_question",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-hostID"),s=$(this).attr("data-selection-id");$.ajax({url:t,type:"post",data:{id:e,hostID:a,selectionID:s},success(){}}).then((()=>{location.reload()}))}))}function addQuestion(t){$(document).on("click",".add_question",(function(){let e=$(this).attr("data-host-id"),a=$(this).attr("data-selection-id");$.ajax({url:t,type:"post",data:{hostID:e,selectionID:a},success(){}}).then((()=>{location.reload()}))}))}function deleteQuestion(t){$(document).on("click",".delete_question",(function(){let e=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:e},success(){}}).then((()=>{location.reload()}))}))}function addAnswer(t){$(document).on("click",".add_answer",(function(){let e=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:e},success(){}}).then((()=>{location.reload()}))}))}function deleteAnswer(t){$(document).on("click",".delete_answer",(function(){let e=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:e},success(){}}).then((()=>{location.reload()}))}))}function deleteBranch(t){$(document).on("click",".delete_branch",(function(){let e=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:e},success(){}}).then((()=>{location.reload()}))}))}function deleteBranchQuestion(t){$(document).on("click",".delete_branch_question",(function(){let e=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:e},success(){}}).then((()=>{location.reload()}))}))}function uploadImageQuestion(t){$(".uploadImage").on("change",(function(e){e.preventDefault();var a=$("#image")[0],s=new FormData(a);let n=$(this).attr("data-id"),i=$(this).attr("data-name");s.append("id",n),s.append("name",i),$.ajax({url:t,type:"post",data:s,contentType:!1,processData:!1,success:function(t){location.reload()}})}))}function uploadImageAnswer(t){$(".imageAnswerUpload").on("change",(function(e){var a=$(this)[0],s=new FormData(a);let n=$(this).attr("data-id"),i=$(this).attr("data-name");s.append("id",n),s.append("answer",!0),s.append("name",i),$.ajax({url:t,type:"post",data:s,contentType:!1,processData:!1,success:function(t){location.reload()}})}))}function deleteAnswerImage(t){$(".deleteAnswerImage").on("click",(function(e){let a=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:a},success(){}}).then((()=>{location.reload()}))}))}function deleteQuestionImage(t){$(".deleteAnswerImage").on("click",(function(e){let a=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:a},success(){}}).then((()=>{location.reload()}))}))}function addUser(t){$(document).on("click","#userAdd",(function(e){e.preventDefault();var a=$("#addForm")[0],s=new FormData(a);$.ajax({url:t,type:"POST",data:s,processData:!1,contentType:!1,success:function(t){$(".error_email").css("display","none"),$(".error_password").css("display","none"),$(".alert-success").css("display","block")},error:function(t,e,a){let s=t.responseText,n=JSON.parse(s),i=n.errors.email,o=n.errors.password;i&&$(".error_email").css("display","block").text(i),o&&$(".error_password").css("display","block").text(o)}})}))}function editUser(t){$('.js-edit-user input[type="text"], .js-edit-user input[type="email"], .js-edit-user input[type="password"], .js-edit-user select, .js-edit-user textarea').on("change",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-name");$.ajax({url:t,type:"post",data:{id:e,name:a,value:$(this).val()},success(){}}).then((()=>{$(this).addClass("is-valid"),setTimeout((()=>{$(this).removeClass("is-valid")}),500)}))})),$(document).on("change",".select_user",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-name");$(this).find(":selected").attr("data-selection-id");$.ajax({url:t,type:"post",data:{id:e,name:a,value:$(this).val()},success(){}}).then((()=>{$(this).addClass("is-valid"),setTimeout((()=>{$(this).removeClass("is-valid")}),500)}))}))}function deleteUser(t){$(document).on("click",".delete_user",(function(){let e=$(this).attr("data-id"),a=$(this).closest(".foo");$.ajax({url:t,type:"post",data:{id:e},success(){a.remove()}}).then((()=>{}))}))}function uploadImageUser(t){$(".uploadImageUser").on("change",(function(e){var a=$(this)[0],s=new FormData(a);let n=$(this).attr("data-id"),i=$(this).attr("data-name");s.append("id",n),s.append("name",i),$.ajax({url:t,type:"post",data:s,contentType:!1,processData:!1,success:function(t){location.reload()}})}))}function editSelection(t){$('.js-edit-selection input[type="text"], .js-edit-selection').on("change",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-name");$.ajax({url:t,type:"post",data:{id:e,name:a,value:$(this).val()},success(){}}).then((()=>{$(this).addClass("is-valid"),setTimeout((()=>{$(this).removeClass("is-valid")}),500)}))}))}function addSelection(t){$(document).on("click",".add_selection",(function(){let e=$(this).attr("data-user-id");$.ajax({url:t,type:"post",data:{id:e},success(){}}).then((()=>{location.reload()}))}))}function deleteSelection(t){$(document).on("click",".delete_selection",(function(){let e=$(this).attr("data-id");$(this).closest(".foo");$.ajax({url:t,type:"post",data:{id:e},success(){location.reload()}}).then((()=>{}))}))}function addQuestionSelection(t){$(document).on("click",".add_question_selection",(function(){let e=$(this).attr("data-selection-id");$.ajax({url:t,type:"post",data:{selectionID:e},success(){}}).then((()=>{location.reload()}))}))}function deleteQuestionSelection(t){$(document).on("click",".delete_question_selection",(function(){let e=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:e},success(){}}).then((()=>{location.reload()}))}))}function addAnswerSelection(t){$(document).on("click",".add_answer_selection",(function(){let e=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:e},success(){}}).then((()=>{location.reload()}))}))}function deleteAnswerSelection(t){$(document).on("click",".delete_answer_selection",(function(){let e=$(this).attr("data-id");$.ajax({url:t,type:"post",data:{id:e},success(){}}).then((()=>{location.reload()}))}))}function addBranchSelection(t){$(document).on("click",".add_branch_selection",(function(){let e=$(this).attr("data-id"),a=$(this).attr("data-selectionID"),s=$(this).attr("data-type");$.ajax({url:t,type:"post",data:{id:e,type:s,selectionID:a},success(){}}).then((()=>{location.reload()}))}))}function saveSelection(t){$(document).on("change",".js-react-save-select",(function(){let e=$(this).attr("data-host-id"),a=$(this).find(":selected").attr("data-selection-id");$.ajax({url:t,type:"post",data:{selectionID:a,value:$(this).val(),hostID:e,select:1},success:function(){location.reload()}})}))}editor.load(getJson());
